<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autoencoder vs VAE è¦–è¦ºåŒ–æ¯”è¼ƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .model-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .model-section h2 {
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        canvas {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            background: white;
            cursor: crosshair;
            display: block;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .description {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            line-height: 1.6;
            font-size: 0.95em;
        }
        
        .description ul {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .description li {
            margin-bottom: 5px;
        }
        
        .controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .control-group label {
            font-weight: 600;
            color: #333;
            min-width: 120px;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        input[type="range"] {
            flex: 1;
            min-width: 200px;
        }
        
        .value-display {
            background: white;
            padding: 5px 12px;
            border-radius: 5px;
            font-weight: 600;
            color: #667eea;
            min-width: 50px;
            text-align: center;
        }
        
        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 8px 15px;
            border-radius: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #333;
        }
        
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .info-box h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }
        
        @media (max-width: 1024px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¬ Autoencoder vs VAE æ½›åœ¨ç©ºé–“æ¯”è¼ƒ</h1>
        <p class="subtitle">é»æ“Šç•«å¸ƒä¾†æ·»åŠ è³‡æ–™é»ï¼Œè§€å¯Ÿå…©ç¨®æ¨¡å‹å¦‚ä½•çµ„ç¹”æ½›åœ¨ç©ºé–“</p>
        
        <div class="controls">
            <div class="control-group">
                <label>è³‡æ–™é¡åˆ¥æ•¸é‡ï¼š</label>
                <input type="range" id="numClasses" min="2" max="5" value="3" step="1">
                <span class="value-display" id="numClassesValue">3</span>
            </div>
            <div class="control-group">
                <label>VAE è®Šç•°æ•¸ï¼š</label>
                <input type="range" id="vaeVariance" min="0.1" max="2" value="0.5" step="0.1">
                <span class="value-display" id="vaeVarianceValue">0.5</span>
            </div>
            <div class="control-group">
                <button id="generateBtn">ğŸ² ç”Ÿæˆéš¨æ©Ÿè³‡æ–™</button>
                <button id="clearBtn">ğŸ—‘ï¸ æ¸…é™¤å…¨éƒ¨</button>
                <button id="interpolateBtn">âœ¨ å±•ç¤ºæ’å€¼</button>
            </div>
        </div>
        
        <div class="comparison">
            <div class="model-section">
                <h2>ğŸ”µ Autoencoderï¼ˆå‚³çµ±è‡ªç·¨ç¢¼å™¨ï¼‰</h2>
                <canvas id="aeCanvas"></canvas>
                <div class="description">
                    <strong>ç‰¹é»ï¼š</strong>
                    <ul>
                        <li>æ¯å€‹è¼¸å…¥æ˜ å°„åˆ°<strong>ä¸€å€‹ç¢ºå®šçš„é»</strong></li>
                        <li>æ½›åœ¨ç©ºé–“å¯èƒ½æœ‰ã€Œç©ºæ´ã€æˆ–ä¸é€£çºŒå€åŸŸ</li>
                        <li>ç›¸ä¼¼è³‡æ–™æœƒèšé›†ï¼Œä½†åˆ†ä½ˆä¸è¦å‰‡</li>
                        <li>âŒ åœ¨ç©ºç™½å€åŸŸéš¨æ©Ÿæ¡æ¨£å¯èƒ½ç”¢ç”Ÿç„¡æ„ç¾©è¼¸å‡º</li>
                    </ul>
                </div>
            </div>
            
            <div class="model-section">
                <h2>ğŸŸ¢ VAEï¼ˆè®Šåˆ†è‡ªç·¨ç¢¼å™¨ï¼‰</h2>
                <canvas id="vaeCanvas"></canvas>
                <div class="description">
                    <strong>ç‰¹é»ï¼š</strong>
                    <ul>
                        <li>æ¯å€‹è¼¸å…¥æ˜ å°„åˆ°<strong>ä¸€å€‹æ©Ÿç‡åˆ†ä½ˆ</strong>ï¼ˆåœ“åœˆè¡¨ç¤ºæ¨™æº–å·®ï¼‰</li>
                        <li>æ½›åœ¨ç©ºé–“é€£çºŒä¸”å¹³æ»‘ï¼Œæ¥è¿‘æ¨™æº–å¸¸æ…‹åˆ†ä½ˆ</li>
                        <li>åˆ†ä½ˆä¹‹é–“æœƒé‡ç–Šï¼Œç¢ºä¿ç©ºé–“é€£çºŒæ€§</li>
                        <li>âœ… å¯ä»¥åœ¨ä»»ä½•ä½ç½®æ¡æ¨£ä¸¦ç”Ÿæˆæœ‰æ•ˆè¼¸å‡º</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #e74c3c;"></div>
                <span>é¡åˆ¥ 1</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #3498db;"></div>
                <span>é¡åˆ¥ 2</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #2ecc71;"></div>
                <span>é¡åˆ¥ 3</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #f39c12;"></div>
                <span>é¡åˆ¥ 4</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #9b59b6;"></div>
                <span>é¡åˆ¥ 5</span>
            </div>
        </div>
        
        <div class="info-box">
            <h3>ğŸ’¡ å¦‚ä½•ä½¿ç”¨</h3>
            <p><strong>é»æ“Šç•«å¸ƒï¼š</strong>åœ¨å…©å€‹æ½›åœ¨ç©ºé–“ä¸­æ·»åŠ è³‡æ–™é»ï¼ˆæœƒè‡ªå‹•åˆ†é…åˆ°æœ€è¿‘çš„é¡åˆ¥ï¼‰</p>
            <p><strong>ç”Ÿæˆéš¨æ©Ÿè³‡æ–™ï¼š</strong>è‡ªå‹•ç”¢ç”Ÿå¤šå€‹é¡åˆ¥çš„è³‡æ–™é»</p>
            <p><strong>å±•ç¤ºæ’å€¼ï¼š</strong>åœ¨å…©å€‹é»ä¹‹é–“é€²è¡Œæ’å€¼ï¼Œè§€å¯Ÿ VAE çš„å¹³æ»‘æ€§</p>
            <p><strong>è§€å¯Ÿå·®ç•°ï¼š</strong>æ³¨æ„ VAE çš„åœ“åœˆï¼ˆä»£è¡¨ä¸ç¢ºå®šæ€§ï¼‰å¦‚ä½•ä½¿æ½›åœ¨ç©ºé–“æ›´åŠ é€£çºŒ</p>
        </div>
    </div>

    <script>
        // å…¨åŸŸè®Šæ•¸
        const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6'];
        let numClasses = 3;
        let vaeVariance = 0.5;
        let aePoints = [];
        let vaePoints = [];
        let interpolationPoints = [];
        
        let aeCanvas, vaeCanvas, aeCtx, vaeCtx;
        
        // åˆå§‹åŒ–
        function init() {
            aeCanvas = document.getElementById('aeCanvas');
            vaeCanvas = document.getElementById('vaeCanvas');
            aeCtx = aeCanvas.getContext('2d');
            vaeCtx = vaeCanvas.getContext('2d');
            
            resizeCanvas();
            setupEventListeners();
            
            // åˆå§‹åŒ–æ™‚ç”Ÿæˆä¸€äº›è³‡æ–™
            setTimeout(generateRandomData, 300);
        }
        
        // è¨­å®šç•«å¸ƒå¤§å°
        function resizeCanvas() {
            const container = aeCanvas.parentElement;
            const width = container.offsetWidth - 40;
            const height = 400;
            
            aeCanvas.width = width;
            aeCanvas.height = height;
            vaeCanvas.width = width;
            vaeCanvas.height = height;
            
            redraw();
        }
        
        // è¨­å®šäº‹ä»¶ç›£è½å™¨
        function setupEventListeners() {
            // æ»‘æ¡¿äº‹ä»¶
            document.getElementById('numClasses').addEventListener('input', function(e) {
                numClasses = parseInt(e.target.value);
                document.getElementById('numClassesValue').textContent = numClasses;
            });
            
            document.getElementById('vaeVariance').addEventListener('input', function(e) {
                vaeVariance = parseFloat(e.target.value);
                document.getElementById('vaeVarianceValue').textContent = vaeVariance.toFixed(1);
                redraw();
            });
            
            // æŒ‰éˆ•äº‹ä»¶
            document.getElementById('generateBtn').addEventListener('click', generateRandomData);
            document.getElementById('clearBtn').addEventListener('click', clearAll);
            document.getElementById('interpolateBtn').addEventListener('click', demonstrateInterpolation);
            
            // ç•«å¸ƒé»æ“Šäº‹ä»¶
            aeCanvas.addEventListener('click', function(e) {
                const rect = aeCanvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                addPoint(x, y);
            });
            
            vaeCanvas.addEventListener('click', function(e) {
                const rect = vaeCanvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                addPoint(x, y);
            });
            
            // è¦–çª—å¤§å°èª¿æ•´
            window.addEventListener('resize', resizeCanvas);
        }
        
        // æ·»åŠ é»
        function addPoint(x, y) {
            const classId = Math.floor(Math.random() * numClasses);
            
            aePoints.push({ x: x, y: y, class: classId });
            vaePoints.push({ x: x, y: y, class: classId, variance: vaeVariance });
            
            redraw();
        }
        
        // ç”Ÿæˆéš¨æ©Ÿè³‡æ–™
        function generateRandomData() {
            clearAll();
            
            for (let c = 0; c < numClasses; c++) {
                const centerX = Math.random() * (aeCanvas.width - 100) + 50;
                const centerY = Math.random() * (aeCanvas.height - 100) + 50;
                const numPoints = Math.floor(Math.random() * 11) + 15;
                
                for (let i = 0; i < numPoints; i++) {
                    const aeRadius = Math.random() * 40 + 10;
                    const aeAngle = Math.random() * Math.PI * 2;
                    const aeX = centerX + Math.cos(aeAngle) * aeRadius;
                    const aeY = centerY + Math.sin(aeAngle) * aeRadius;
                    
                    aePoints.push({ x: aeX, y: aeY, class: c });
                    
                    const vaeRadius = Math.random() * 50 + 20;
                    const vaeAngle = Math.random() * Math.PI * 2;
                    const vaeX = centerX + Math.cos(vaeAngle) * vaeRadius;
                    const vaeY = centerY + Math.sin(vaeAngle) * vaeRadius;
                    
                    vaePoints.push({ x: vaeX, y: vaeY, class: c, variance: vaeVariance });
                }
            }
            
            redraw();
        }
        
        // æ¸…é™¤å…¨éƒ¨
        function clearAll() {
            aePoints = [];
            vaePoints = [];
            interpolationPoints = [];
            redraw();
        }
        
        // å±•ç¤ºæ’å€¼
        function demonstrateInterpolation() {
            if (aePoints.length < 2) {
                alert('è«‹å…ˆæ·»åŠ è‡³å°‘å…©å€‹è³‡æ–™é»ï¼');
                return;
            }
            
            const idx1 = Math.floor(Math.random() * aePoints.length);
            let idx2 = Math.floor(Math.random() * aePoints.length);
            while (idx2 === idx1 && aePoints.length > 1) {
                idx2 = Math.floor(Math.random() * aePoints.length);
            }
            
            const p1 = aePoints[idx1];
            const p2 = aePoints[idx2];
            
            interpolationPoints = [];
            
            for (let t = 0; t <= 1; t += 0.1) {
                const x = p1.x + (p2.x - p1.x) * t;
                const y = p1.y + (p2.y - p1.y) * t;
                interpolationPoints.push({ x: x, y: y });
            }
            
            redraw();
            
            setTimeout(function() {
                interpolationPoints = [];
                redraw();
            }, 3000);
        }
        
        // é‡ç¹ªç•«å¸ƒ
        function redraw() {
            aeCtx.clearRect(0, 0, aeCanvas.width, aeCanvas.height);
            vaeCtx.clearRect(0, 0, vaeCanvas.width, vaeCanvas.height);
            
            drawGrid(aeCtx, aeCanvas.width, aeCanvas.height);
            drawGrid(vaeCtx, vaeCanvas.width, vaeCanvas.height);
            
            // ç¹ªè£½ AE é»
            for (let i = 0; i < aePoints.length; i++) {
                const point = aePoints[i];
                aeCtx.fillStyle = colors[point.class];
                aeCtx.beginPath();
                aeCtx.arc(point.x, point.y, 6, 0, Math.PI * 2);
                aeCtx.fill();
                aeCtx.strokeStyle = '#333';
                aeCtx.lineWidth = 2;
                aeCtx.stroke();
            }
            
            // ç¹ªè£½ VAE é»
            for (let i = 0; i < vaePoints.length; i++) {
                const point = vaePoints[i];
                
                vaeCtx.strokeStyle = colors[point.class];
                vaeCtx.lineWidth = 2;
                vaeCtx.globalAlpha = 0.3;
                vaeCtx.beginPath();
                vaeCtx.arc(point.x, point.y, point.variance * 30, 0, Math.PI * 2);
                vaeCtx.stroke();
                
                vaeCtx.globalAlpha = 1;
                vaeCtx.fillStyle = colors[point.class];
                vaeCtx.beginPath();
                vaeCtx.arc(point.x, point.y, 6, 0, Math.PI * 2);
                vaeCtx.fill();
                vaeCtx.strokeStyle = '#333';
                vaeCtx.lineWidth = 2;
                vaeCtx.stroke();
            }
            
            if (interpolationPoints.length > 0) {
                drawInterpolation(aeCtx);
                drawInterpolation(vaeCtx);
            }
        }
        
        // ç¹ªè£½ç¶²æ ¼
        function drawGrid(ctx, width, height) {
            ctx.strokeStyle = '#ecf0f1';
            ctx.lineWidth = 1;
            
            for (let x = 0; x < width; x += 50) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            for (let y = 0; y < height; y += 50) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
        }
        
        // ç¹ªè£½æ’å€¼
        function drawInterpolation(ctx) {
            ctx.strokeStyle = '#e91e63';
            ctx.lineWidth = 3;
            ctx.setLineDash([5, 5]);
            
            ctx.beginPath();
            ctx.moveTo(interpolationPoints[0].x, interpolationPoints[0].y);
            
            for (let i = 1; i < interpolationPoints.length; i++) {
                ctx.lineTo(interpolationPoints[i].x, interpolationPoints[i].y);
            }
            
            ctx.stroke();
            ctx.setLineDash([]);
            
            for (let i = 0; i < interpolationPoints.length; i++) {
                const point = interpolationPoints[i];
                if (i === 0 || i === interpolationPoints.length - 1) {
                    ctx.fillStyle = '#e91e63';
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 8, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    ctx.fillStyle = '#ffc107';
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }
        
        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
